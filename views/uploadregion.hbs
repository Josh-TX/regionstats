{{#section 'styles'}}
	#modal-overlay {
		position: fixed;
		z-index:100;
		top: 0px;
		left: 0px;
		height:100%;
		width:100%;
		background: #000;
		display: none;
	}
	#modal-container{
		background-color: white;
		border-radius: 5px 5px 5px 5px;
		padding: 5px;
		box-shadow: 0px 0px 5px black;
		display: none;
		position: fixed;
		width: 90%;
		max-width: 700px;
		top: 10%;
		right: 0;
		left: 0;
		bottom: 10%;
		margin-right: auto;
		margin-left: auto;
		z-index: 11000;
		overflow-y: scroll;
	}
{{/section}}

	<div ng-controller="uploadRegion" ng-submit="submitForm()">
		<form enctype="multipart/form-data" accept-charset="UTF-8">
			<input type="file" file-reader="form.data"></input>
			<span ng-bind="error.file"></span>
			<input type="submit" value="submit"></input>
		</form>
		
		Preview:
		<table>
			<tr>
				<th ng-bind="form.type"></th>
			</tr>
			<tr ng-repeat="region in form.data track by $index">
				<td>{{ng "region"}}</td>
			</tr>
		</table>
		<div id="modal-overlay" ng-click="showAlert()"></div>
	</div>
	
{{#section 'scripts'}}

<script type="application/javascript">
    var app = angular.module("myApp", []);

	app.controller("uploadRegion", function($http, $scope){
		$scope.regionModal = false;
		$scope.form = {};
		$scope.form.data = [];
		$scope.form.type = "Country"
		$scope.submitForm = function(){
			$scope.form.data.map(titleCase);
			$scope.error = uploadRegionValidate($scope.form);
			return;
			if ($scope.error.none)
				$http.post('/region/upload', $scope.form).then(successCallback, errorCallback);
		}
		
		function successCallback(response){
			alert(response.data);
		}
		
		function errorCallback(response){
			alert(response.data);
		}
		{{{getValidator "titleCase"}}}
		{{{getValidator "uploadregion"}}}
	});
	
	
	app.directive("fileReader", function(){
		function link(scope, element, attr){
			element.on("change", function(e){
				var file = e.target.files[0];
				var reader = new FileReader();
				reader.onload = function(e){
					scope.$apply(function(){
						scope.data = e.target.result.split("\n")
					});
				}
				reader.readAsText(file);
			})
		}
		return {
			restrict: "A",
			scope: {
				data: "=fileReader",
			},
			link: link
		}
	});
	
</script>

{{/section}}